# 역할, 책임, 협력
> 객체지향의 본질이란 무엇일까?
>
> 객체지향의 본질은 *”협력하는 객체들의 공동체”* 를 창조하는 것이다

### 객체지향 설계의 핵심
* 협력을 구성하기 위해 적절한 객체를 찾고 적절한 책임을 할당하는 과정이다
  즉, 객체지향 패러다임 관점에서 핵심은 *역할*, *책임*, *협력*이다

### 영화예매 시스템
* 다양한 객체들이 상호작용을 하고 있다
  [image:7429A546-5F37-4A36-88CB-1578C9353E27-583-000004FD1C6E84A0/005FAF12-7D87-476B-A47D-9A24F6E51737.png]

* 제어흐름은 한 객체에 의한 통제가 아닌 다양한 객체들 사에이 균형있게 분배되어 있다
* 이처럼 객체들이 기능 구현을 위해 수행하는 상호작용을 *협력* 이라고 한다
* 객체가 협력에 참여하기 위해 수행하는 로직을 *책임* 이라고 한다
* 객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 *역할*을 구성한다

---

## 협력
> 협력
>
> 객체들이 기능 구현을 위해 수행하는 상호작용
* 메세지 전송은 객체 사이의 협력을 위해 사용하는 유일한 커뮤니케이션 수단
* 외부의 객체는 오직 메세지만 전송할 수 있다
* 메세지를 수신한 객체는 어떻게 처리할지 스스로 결정한다
  -> ‘객체가 자신의 일을 스스로 처리할 수 있는 자율적인 존재’


[image:7224AACE-F979-4447-BE2E-1E1B94C7469A-583-000025AA3553722E/52E5C33B-F4E7-46BC-BB6C-584215C9F3D5.png]
상영객체는 메세지를 전송하고, 영화 객체는 메서드를 수행한다. 상영객체는 영화 객체 내부의 구현을 알 수 없다. -> 자율적인 객체를 만드는 가장 기본적인 방법은 “캡슐화”

---
## 책임
> 책임
>
> 객체가 협력에 참여하기 위해 수행하는 로직 또는 행동
객체의 책임은 ‘무엇을 알고 있는가?’ / ‘무엇을 할 수 있는가’로 구분된다

* 하는것
    * 객체를 생성하거나 계산을 수행
    * 다른 객체의 행동을 시작시키는 것
    * 다른 객체의 활동을 제어하고 조절

* 아는것
    * 사적인 정보에 관해 아는것
    * 관련된 객체에 관해 아는것
    * 자신이 유도하거나 계산할 수 있는것에 대해 아는것

[image:208503C6-029D-47A8-9F2A-2911876BD9A2-583-000027C153DB0FF9/D3BE0448-D2EE-4D35-B681-F9C95F082183.png]

책임은 하는것 & 아는것과 구분된다. 또한 협력할 객체를 상태값으로 가지고 있다.

### 책임 할당
* 협력에 필요한 지식과 방법을 가장 잘 아는 객체에게 도움을 요청 - ‘정보 전문가’

[image:C40A847F-B696-4CC9-8570-038157293BA8-583-0000285207425933/9F1B48DE-1DBD-4A02-AAAE-0FCF484A4EE1.png]
영화를 예약하기 위해서는, 영화 회차/시간 정보를 알아야한다. 이 정보를 가장 잘 아는 것은 상영 객체이다. 또한 요금을 계산 -> 상영은 요금 정보가 없기에 Movie에게 책임을 위임한다

### 책임 할당시 고려해야 할 요소
* 메세지가 객체를 결정
    * 객체에게 책임을 할당시 필요한 메세지를 먼저 식별
    * 메시지를 처리할 객체를 나중에 선택
      -> 객체가 메시지를 선택하는 것이 아니라, 메시지가 객체를 선택한다

* 행동이 상태를 결정
    * 객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법
    * 협력이 객체의 행동을 결정하고 행동이 객체의 상태를 결정한다. 그 행동이 바로 객체의 책임

## 역할
> 역할
>
> 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합

### 유연하고 재사용 가능한 협력
* 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있다

[image:1D942B38-89BD-49E6-B10F-A74D3E569933-583-00002A8E71B332AD/DD9E420C-299C-4191-8097-60D514687B70.png]
할인 요금을 계산하는 두개의 객체가 있다. 두 객체를 같이 사용하는 대신 하나의 슬롯으로 구성하여 교대로 바꿔뀔수 있게 구성한다. 이 슬롯이 ‘역할’

* 역할을 구현하는 가장 일반적인 방법은 추상 클래스와 인터페이스 사용